{% extends "base.html" %}

{% block content %}

<div class="row justify-content-center"><div class="col" style="max-width: 1200px">

<h1>Submit query</h1>

<form id="queryForm">
  <div class="form-group">
    <input type="email" class="form-control" id="emailInput" name="email" placeholder="username@university.edu">
  </div>
  <div class="form-group">
    <label for="sequenceTextInput">Input protein sequence (plain text or FASTA-formatted)</label>
    <textarea class="form-control" id="sequenceTextInput" name="seqInput" rows="10"></textarea>
  </div>
  <div class="form-row">
    <div class="col">
      <div class="form-group">
        <label for="sequenceFileInput">FASTA-formatted text file</label>
        <input type="file" class="form-control-file" id="sequenceFileInput">
      </div>
    </div>
    <div class="col">
      <div class="form-group">
        <label for="targetDatabaseSelect">Target database</label>
        <select class="form-control" id="targetDatabaseSelect" name="database">
          <option disabled>UniprotKB</option>
          <option disabled>Uniref100</option>
          <option disabled>Uniref90</option>
          <option selected>Uniref50</option>
        </select>
      </div>
    </div>
    <div class="col">
      <div class="form-group">
        <label for="hitCountSelect">Hit count</label>
        <select class="form-control" id="hitCountSelect" name="hitcount">
          <option>50</option>
          <option selected>100</option>
          <option>250</option>
          <option>500</option>
          <option>1000</option>
        </select>
      </div>
    </div>
  </div>
  <button type="submit" class="btn btn-primary" id="runQueryButton"><i class="fas fa-wrench"></i>Run query</button>
  <button type="button" class="btn btn-secondary" id="sampleDataButton">Sample data</button>
  <button type="button" class="btn btn-secondary">Reset fields</button>
</form>

</div></div>

<div class="row justify-content-center"><div class="col" style="max-width: 1200px">

<!-- This is the template result div -->
<div class="row justify-content-center" style="margin-top: 0 !important;"><div class="col" style="max-width: 1200px; margin-top: 0 !important;">
  <h4>Submit query</h4>
  (0.89836776, 2.47555828, -0.75435555, 1.03133869, -0.55328, 2.08079147, -0.58350134, 0.24594277)
  COORDINATES
</div></div>

<!-- This is the template hit div -->
<div class="row justify-content-center"><div class="col" style="max-width: 1200px">
</div>


</div id="output"></div>

</div></div>

{% endblock %}


{% block custom_js %}

<script src="/static/utils.js"></script>

<!-- tfjs and embedding code-->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
<!-- script src="/static/compute.js"></script -->

<!-- alignment from Sequence Manipulation Suite (Paul Stoddard) -->
<!-- https://www.bioinformatics.org/sms2/pairwise_align_protein.html -->
<script type="text/javascript" src="static/align/sms_common.js"></script>
<script type="text/javascript" src="static/align/align_pair_linear.js"></script>
<script type="text/javascript" src="static/align/align_pair_quad.js"></script>
<script type="text/javascript" src="static/align/pairwise_align_protein.js"></script>

<!-- https://flask-wtf.readthedocs.io/en/stable/csrf.html -->
<script type="text/javascript">
  var csrf_token = "{{ csrf_token() }}";

  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader("X-CSRFToken", csrf_token);
      }
    }
  });
</script>


{% endblock %}